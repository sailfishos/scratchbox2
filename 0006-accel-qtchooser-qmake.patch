From 84ee01db808bc425cce28c60c1bb38d72d94f8f3 Mon Sep 17 00:00:00 2001
From: David Greaves <david@dgreaves.com>
Date: Thu, 25 Apr 2013 10:38:08 +0000
Subject: [PATCH] accel-qtchooser-qmake

---
 modes/obs-rpm-build+pp/fs_rules.lua | 7 +++++++
 modes/obs-rpm-build/fs_rules.lua    | 7 +++++++
 2 files changed, 14 insertions(+)

diff --git a/modes/obs-rpm-build+pp/fs_rules.lua b/modes/obs-rpm-build+pp/fs_rules.lua
index 565f076..ab8fa5a 100644
--- a/modes/obs-rpm-build+pp/fs_rules.lua
+++ b/modes/obs-rpm-build+pp/fs_rules.lua
@@ -437,6 +437,9 @@ emulate_mode_rules_usr_bin = {
 		{path="/usr/bin/ccache",
 		 func_class = FUNC_CLASS_EXEC,
 		 actions=accelerated_program_actions},
+		{path="/usr/bin/qtchooser",
+		 func_class = FUNC_CLASS_EXEC,
+		 actions=accelerated_program_actions},
 
 		-- perl & python:
 		-- 	processing depends on SBOX_REDIRECT_IGNORE,
@@ -530,6 +533,10 @@ emulate_mode_rules_usr = {
                 {path = "/usr/lib/rpm/debugedit", actions=accelerated_program_actions},
                 {path = "/usr/lib/rpm/javadeps", actions=accelerated_program_actions},
                 {path = "/usr/lib/rpm/rpmdeps", actions=accelerated_program_actions},
+                {path = "/usr/lib/qt4/bin/qmake", func_class = FUNC_CLASS_EXEC,
+                 actions=accelerated_program_actions},
+                {path = "/usr/lib/qt5/bin/qmake", func_class = FUNC_CLASS_EXEC,
+                 actions=accelerated_program_actions},
 
 		-- gdb wants to have access to our dynamic linker also,
 		-- /usr/lib/libsb2/wrappers/*, etc.
diff --git a/modes/obs-rpm-build/fs_rules.lua b/modes/obs-rpm-build/fs_rules.lua
index ca6af3e..3d75a1f 100644
--- a/modes/obs-rpm-build/fs_rules.lua
+++ b/modes/obs-rpm-build/fs_rules.lua
@@ -368,6 +368,9 @@ emulate_mode_rules_usr_bin = {
 		{path="/usr/bin/ccache",
 		 func_class = FUNC_CLASS_EXEC,
 		 actions=accelerated_program_actions},
+		{path="/usr/bin/qtchooser",
+		 func_class = FUNC_CLASS_EXEC,
+		 actions=accelerated_program_actions},
 
 		{path = "/usr/bin/sb2-show", use_orig_path = true,
 		 protection = readonly_fs_always},
@@ -396,6 +399,10 @@ emulate_mode_rules_usr = {
                 {path = "/usr/lib/rpm/debugedit", actions=accelerated_program_actions},
                 {path = "/usr/lib/rpm/javadeps", actions=accelerated_program_actions},
                 {path = "/usr/lib/rpm/rpmdeps", actions=accelerated_program_actions},
+                {path = "/usr/lib/qt4/bin/qmake", func_class = FUNC_CLASS_EXEC,
+                 actions=accelerated_program_actions},
+                {path = "/usr/lib/qt5/bin/qmake", func_class = FUNC_CLASS_EXEC,
+                 actions=accelerated_program_actions},
 
 		-- gdb wants to have access to our dynamic linker also,
 		-- /usr/lib/libsb2/wrappers/*, etc.
-- 
1.8.3-rc3

